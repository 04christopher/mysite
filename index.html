<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christopher Chen | Arcade Mode</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* 8-Bit Arcade Theme Colors */
            --bg-dark: #1a0b2e; /* Deep Indigo */
            --text-main: #f0f0f0; /* Off-white */
            --header-color: #ff2a6d; /* Neon Pink */
            --accent-cyan: #05d9e8; /* Neon Cyan */
            --accent-yellow: #ffc800; /* Arcade Gold */
            --accent-orange: #ff6c11; /* Hot Orange */
            --glass-bg: rgba(20, 10, 40, 0.9);
            --border-color: #05d9e8;
            --card-hover: #2d1b4e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'VT323', monospace; /* Readable pixel font for body */
            font-size: 1.6rem; /* Increased font size */
            overflow-x: hidden;
            line-height: 1.5;
            text-shadow: 2px 2px 0px #000; /* Drop shadow for depth */
        }

        /* --- CRT/Arcade Overlay --- */
        body::after {
            content: " ";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            z-index: 999;
            background-size: 100% 4px;
            pointer-events: none;
        }

        /* --- Canvas Background --- */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.6;
        }

        /* --- Typography --- */
        h1, h2, h3, .arcade-font {
            font-family: 'Press Start 2P', cursive; /* Chunky 8-bit font */
            text-transform: uppercase;
            line-height: 1.4;
        }

        h1 {
            color: var(--accent-yellow);
            text-shadow: 4px 4px 0px #d0205e; /* Pink shadow on yellow text */
        }

        h2 {
            color: var(--accent-cyan);
            text-shadow: 3px 3px 0px #2a0052;
        }

        h3 {
            color: var(--header-color);
        }

        .mono {
            font-family: 'VT323', monospace;
        }

        .accent-text {
            color: var(--header-color);
        }

        /* --- Navigation --- */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: rgba(26, 11, 46, 0.95);
            border-bottom: 4px solid var(--header-color);
        }

        .logo {
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            color: var(--accent-yellow);
            text-shadow: 2px 2px 0 #ff2a6d;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--accent-cyan);
            text-decoration: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem; /* Smaller because this font is wide */
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--accent-yellow);
            animation: pulse 0.5s infinite;
        }

        /* --- Hero Section --- */
        section {
            padding: 6rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: row; /* Layout: Row for Desktop */
            justify-content: space-between; /* Space between text and image */
            align-items: center;
            padding-top: 0;
            gap: 2rem;
        }

        .hero-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .hero-profile {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .profile-frame {
            width: 350px;
            height: 350px;
            border: 4px solid var(--accent-cyan);
            background: #000;
            position: relative;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.5);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000; /* Lifts image above the scanlines */
        }

        .profile-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .download-btn {
            background: transparent;
            border: 2px solid var(--text-main);
            color: var(--text-main);
            padding: 10px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
            text-decoration: none;
            transition: all 0.2s;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .download-btn:hover {
            background: var(--text-main);
            color: var(--bg-dark);
            transform: translateY(2px);
            box-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 4rem);
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 2rem;
            color: var(--text-main);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Blinking Block Cursor */
        .cursor {
            display: inline-block;
            width: 20px;
            height: 1em;
            background-color: var(--accent-cyan);
            animation: blink 0.8s step-end infinite;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        .cta-btn {
            display: inline-block;
            padding: 15px 25px;
            background: var(--header-color);
            border-bottom: 6px solid #b0003a; /* Darker pink for 3D effect */
            color: white;
            border-radius: 6px;
            text-decoration: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            transition: all 0.1s;
            margin-top: 2rem;
            text-shadow: 1px 1px 0 #000;
            cursor: pointer;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .cta-btn:hover {
            transform: translateY(4px);
            border-bottom: 2px solid #b0003a;
            filter: brightness(1.1);
        }

        /* --- Section Styling --- */
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 4rem;
            border-bottom: 4px dashed var(--accent-cyan);
            padding-bottom: 20px;
        }

        .section-header h2 {
            font-size: 1.5rem;
            margin-right: 20px;
        }

        /* --- Skills Grid --- */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 2rem;
        }

        .skill-card {
            background: #241245;
            border: 4px solid var(--accent-yellow);
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s;
            box-shadow: 6px 6px 0px 0px rgba(0,0,0,0.5);
        }

        .skill-card:hover {
            transform: translate(-4px, -4px);
            box-shadow: 10px 10px 0px 0px var(--accent-cyan);
            background: #331a5e;
        }

        .skill-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--header-color);
            text-shadow: 2px 2px 0 #000;
        }

        .skill-card h3 {
            font-family: 'VT323', monospace;
            font-size: 1.8rem;
            color: var(--accent-yellow);
            text-shadow: none;
        }

        /* --- Projects --- */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 3rem;
        }

        .project-card {
            background: #241245;
            border: 4px solid var(--header-color);
            padding: 2rem;
            position: relative;
            box-shadow: 8px 8px 0px 0px rgba(0,0,0,0.5);
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 8px 12px 0px 0px var(--accent-yellow);
        }

        .project-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 2px dotted var(--text-main);
            padding-bottom: 15px;
        }

        .folder-icon {
            font-size: 2rem;
            color: var(--accent-cyan);
        }

        .project-links a {
            color: var(--text-main);
            font-size: 1.5rem;
            margin-left: 1rem;
            transition: color 0.2s;
        }

        .project-links a:hover {
            color: var(--accent-yellow);
        }

        .project-title {
            font-size: 1rem; /* Press Start 2P is big */
            margin-bottom: 1rem;
            color: var(--accent-yellow);
        }

        .project-desc {
            color: #d1d1d1;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            font-family: 'VT323', monospace;
            text-shadow: none;
            flex-grow: 1;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 1.1rem;
            color: var(--accent-cyan);
            font-family: 'VT323', monospace;
        }

        .project-select-btn {
            background: transparent;
            border: 2px solid var(--accent-orange);
            color: var(--accent-orange);
            padding: 8px 16px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 20px;
            text-align: center;
        }

        .project-select-btn:hover {
            background: var(--accent-orange);
            color: #1a0b2e;
            box-shadow: 0 0 10px var(--accent-orange);
        }

        /* --- Modal Styling --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--bg-dark);
            border: 4px solid var(--accent-orange);
            box-shadow: 0 0 20px var(--accent-orange);
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideDown 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: transparent;
            border: none;
            color: var(--header-color);
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-btn:hover {
            color: var(--text-main);
            transform: scale(1.2);
        }

        /* --- Carousel Styling --- */
        .carousel-container {
            position: relative;
            width: 100%;
            min-height: 300px; /* Use min-height to allow growth */
            height: auto;      /* Allow container to wrap content */
            margin: 1.5rem 0;
            background: #000;
            border: 2px solid var(--accent-cyan);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-slide {
            display: none;
            width: 100%;
            min-height: 300px; /* Ensure slides have minimum height */
            /* Styling for text placeholders (REMOVE if using real images) */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--accent-cyan);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            text-align: center;
            background: radial-gradient(circle, #1a0b2e 0%, #000 100%);
        }

        .carousel-slide img {
            width: 100%;
            height: auto;      /* Natural height */
            max-height: 60vh;  /* Limit max height */
            object-fit: contain; /* Ensure whole image fits */
            display: block;    /* Remove bottom gap */
        }

        /* Video Support */
        .carousel-slide iframe,
        .carousel-slide video {
            width: 100%;
            height: 100%;
            min-height: 300px;
            border: none;
        }

        .carousel-slide.active {
            display: flex;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(26, 11, 46, 0.7);
            color: var(--accent-yellow);
            border: 2px solid var(--accent-yellow);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px 10px;
            z-index: 10;
            transition: 0.2s;
            font-family: 'Press Start 2P', cursive;
        }

        .carousel-btn:hover {
            background: var(--accent-yellow);
            color: #000;
        }

        .carousel-btn.prev { left: 10px; }
        .carousel-btn.next { right: 10px; }

        .modal-links {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        /* --- Flashing Animation Class --- */
        .flash-effect {
            animation: blink 0.8s step-end infinite;
        }

        /* --- Contact --- */
        .contact {
            text-align: center;
            margin-bottom: 5rem;
        }

        .contact p {
            color: var(--text-main);
            max-width: 600px;
            margin: 0 auto 2rem;
            font-size: 1.5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .social-icon {
            color: var(--accent-cyan);
            font-size: 2.5rem;
            transition: all 0.2s;
        }

        .social-icon:hover {
            color: var(--header-color);
            transform: scale(1.2) rotate(5deg);
        }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 3rem;
            font-size: 0.8rem;
            color: var(--accent-yellow);
            border-top: 4px solid var(--accent-orange);
            background: #11061f;
            font-family: 'Press Start 2P', cursive;
            line-height: 2;
        }

        /* --- Arcade Game Styling --- */
        #arcade-container {
            width: 100%;
            height: 350px;
            background: #000;
            border: 4px solid var(--accent-cyan);
            position: relative;
            overflow: hidden;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.5);
        }

        #arcade-canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        #arcade-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            text-align: center;
        }

        #arcade-score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: var(--text-main);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            pointer-events: none;
            display: none;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            .hero {
                flex-direction: column;
                justify-content: center;
                text-align: center;
            }
            .hero-text {
                align-items: center;
            }
            .hero h1 {
                font-size: 1.8rem; /* Adjusted for mobile */
            }
            .modal-content {
                width: 95%;
                padding: 1rem;
            }
            .carousel-container {
                min-height: 200px; /* Smaller carousel on mobile */
            }
            /* Stack the about grid on mobile */
            #about > div {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
</head>
<body>

<!-- Background Animation -->
<canvas id="bg-canvas"></canvas>

<!-- Navigation -->
<nav>
    <div class="logo">PLAYER_1: Christopher Chen</div>
    <ul class="nav-links">
        <li><a href="#about">ABOUT</a></li>
        <li><a href="#skills">SKILLS</a></li>
        <li><a href="#projects">PROJECTS</a></li>
        <li><a href="#contact">CONTACT</a></li>
    </ul>
</nav>

<!-- Hero Section -->
<section class="hero" id="home">
    <!-- Left Column: Text -->
    <div class="hero-text">
        <p class="arcade-font flash-effect" style="color: var(--accent-cyan); font-size: 0.8rem; margin-bottom: 1rem;">INSERT COIN TO START</p>
        <h1>Christopher Chen</h1>
        <div class="hero-subtitle">
            <span style="color: var(--accent-orange); font-family: 'Press Start 2P', cursive; font-size: 1rem;">SELECT CLASS:</span>
            <span id="typewriter" style="color: white; font-family: 'VT323', monospace; font-size: 2rem; margin-left: 10px;"></span><span class="cursor"></span>
        </div>
        <p style="max-width: 600px; color: #ddd; margin-bottom: 2rem; font-size: 1.5rem;">
            Welcome to my website!<br>
            Check out a bit about me below.
        </p>
        <a href="#projects" class="cta-btn">PRESS START</a>
    </div>

    <!-- Right Column: Profile & Download -->
    <div class="hero-profile">
        <div class="profile-frame">
            <!-- REPLACE 'assets/profile.jpg' WITH YOUR LOCAL IMAGE FILE -->
            <img src="photos/profile.png" alt="Christopher Chen Profile">
        </div>
        <!-- REPLACE 'assets/resume.pdf' WITH YOUR LOCAL CV FILE -->
        <a href="photos/ChristopherChenResume.pdf" class="download-btn" download>
            DOWNLOAD CV <i class="fa-solid fa-file-arrow-down"></i>
        </a>
    </div>
</section>

<!-- About Section -->
<section id="about">
    <div class="section-header">
        <h2>ABOUT ME</h2>
    </div>
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 50px; align-items: start;">
        <div style="color: var(--text-main);">
            <p style="margin-bottom: 15px;">
                Hey! I'm Christopher, a 3rd year student currently majoring in Computer Science, BS, at the University of British Columbia (UBC)!
            </p>
            <p style="margin-bottom: 15px;">
                My last internship was at <a href="https://jostle.me" target="_blank" style="color: var(--accent-cyan); text-decoration: none; border-bottom: 1px dashed var(--accent-cyan);">Jostle</a>,
                where I worked on client facing library and chat features, including our customer facing RAG conversational AI and search. Previously, I've also been employed at Canada Post and Mc Donald's.
            </p>
            <p style="margin-bottom: 15px;">
                At school, I'm particularly drawn to math, algorithms, and ML work, but I love working with any technology to solve a problem.
                I'm also an executive at UBC ESports Association and a volunteer at GIRLsmarts4tech, where I teach workshops for high-school students.
            </p>
            <p>
                Outside of school, I love active living including playing basketball, hiking, skiing and skating, and skateboarding.
                I also play piano and all three saxophones (alto, tenor, berry) and enjoy playing all sorts of games (especially puzzle games) and watching TV shows and movies. I have a very long watchlist! (Ask me about anything.)
            </p>
        </div>

        <!-- Arcade Game Box -->
        <div style="position: relative;">
            <div id="arcade-container">
                <canvas id="arcade-canvas"></canvas>
                <div id="arcade-overlay" onclick="startArcadeGame()">
                    <p class="arcade-font" style="font-size: 1.2rem; color: var(--accent-yellow); margin-bottom: 10px;">ASTEROIDS</p>
                    <p class="mono" style="font-size: 1.2rem;">CLICK TO START</p>
                    <p class="mono" style="font-size: 0.9rem; color: #aaa; margin-top: 10px;">ARROWS: Move<br>SPACE: Shoot</p>
                </div>
                <div id="arcade-score">SCORE: 0</div>
            </div>
        </div>
    </div>
</section>

<!-- Skills Section -->
<section id="skills">
    <div class="section-header">
        <h2>INVENTORY</h2>
    </div>
    <div class="skills-grid">
        <div class="skill-card">
            <i class="fa-brands fa-java skill-icon"></i>
            <h3>Java</h3>
        </div>
        <div class="skill-card">
            <i class="fa-brands fa-python skill-icon"></i>
            <h3>Python</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-code skill-icon"></i>
            <h3>C/C++</h3>
        </div>
        <div class="skill-card">
            <i class="fa-brands fa-js skill-icon"></i>
            <h3>JavaScript</h3>
        </div>
        <div class="skill-card">
            <i class="fa-brands fa-html5 skill-icon"></i>
            <h3>HTML/CSS</h3>
        </div>
        <div class="skill-card">
            <i class="fa-brands fa-git-alt skill-icon"></i>
            <h3>Git</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-database skill-icon"></i>
            <h3>SQL</h3>
        </div>
        <div class="skill-card">
            <i class="fa-brands fa-docker skill-icon"></i>
            <h3>Docker</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-window-maximize skill-icon"></i>
            <h3>Selenium</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-eye skill-icon"></i>
            <h3>OpenCV</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-cube skill-icon"></i>
            <h3>Blender</h3>
        </div>
        <div class="skill-card">
            <i class="fa-solid fa-rocket skill-icon"></i>
            <h3>Godot</h3>
        </div>
    </div>
</section>

<!-- Projects Section -->
<section id="projects">
    <div class="section-header">
        <h2>SOME THINGS I'VE DONE</h2>
    </div>
    <div class="projects-grid">
        <!-- Project 1 -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-ghost folder-icon" style="color: var(--header-color);"></i>
                <div class="project-links">
                    <a href="https://github.com/troy-wu/team1" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-github"></i></a>
                    <!--                    <a href="#"><i class="fa-solid fa-up-right-from-square"></i></a>-->
                </div>
            </div>
            <h3 class="project-title">Mindful Motion</h3>
            <p class="project-desc">
                This project won 1st place at HelloHacks by using a camera to count your exercise reps and help you hold a yoga pose.
            </p>
            <div class="project-tech">
                <span>OpenCV</span>
                <span>Python</span>
            </div>
            <button class="project-select-btn" onclick="openModal('algo')">SELECT LEVEL</button>
        </div>

        <!-- Project 2 -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-basketball folder-icon" style="color: var(--accent-yellow);"></i>
                <div class="project-links">
                    <a href="https://github.com/04christopher/basketbot" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-github"></i></a>
                </div>
            </div>
            <h3 class="project-title">BasketBot</h3>
            <p class="project-desc">
                This project won 1st place at ProduHacks by counting basketball score with a camera, and capturing speech for voice controls.
            </p>
            <div class="project-tech">
                <span>OpenCV</span>
                <span>Python</span>
                <span>Vosk Speech Recognition</span>
                <span>TensorFlow</span>
            </div>
            <button class="project-select-btn" onclick="openModal('chatbot')">SELECT LEVEL</button>
        </div>

        <!-- Project 3 -->
        <div class="project-card">
            <div class="project-top">
                <!-- CHANGED ICON TO ASTRONAUT (Among Us Crewmate) -->
                <i class="fa-solid fa-user-astronaut folder-icon" style="color: var(--accent-orange);"></i>
                <div class="project-links">
                    <a href="https://github.com/04christopher/amongusDB" target="_blank" rel="noopener noreferrer"  ><i class="fa-brands fa-github"></i></a>
                </div>
            </div>
            <h3 class="project-title">"Among Us" Database</h3>
            <p class="project-desc">
                This is a functional database that can represent the sequence of events of any Among Us Game.
            </p>
            <div class="project-tech">
                <span>SQL</span>
                <span>Oracle DB</span>
                <span>JS</span>
            </div>
            <button class="project-select-btn" onclick="openModal('portfolio')">SELECT LEVEL</button>
        </div>

        <!-- Project 4 -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-map folder-icon" style="color: var(--accent-cyan);"></i>
                <div class="project-links">
                    <a href="https://github.com/04christopher/campus-explorer" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-github"></i></a>
                    <!--                    <a href="#"><i class="fa-solid fa-up-right-from-square"></i></a>-->
                </div>
            </div>
            <h3 class="project-title">UBC Campus Explorer</h3>
            <p class="project-desc">
                A website that allows a user to search, filter, and locate all rooms and lecture halls on campus.
            </p>
            <div class="project-tech">
                <span>TypeScript</span>
                <span>Express.js</span>
            </div>
            <button class="project-select-btn" onclick="openModal('campusexplorer')">SELECT LEVEL</button>
        </div>

        <!-- NEW Project 5: Platformer Game -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-gamepad folder-icon" style="color: var(--header-color);"></i>
                <div class="project-links">
                    <!--                    <a href="#"><i class="fa-brands fa-github"></i></a>-->
                    <!--                    <a href="#"><i class="fa-solid fa-up-right-from-square"></i></a>-->
                </div>
            </div>
            <h3 class="project-title">AVOID CATS PLATFORMER GAME</h3>
            <p class="project-desc">
                A platformer game I made in Godot, where you play as a character that can't touch cats. (Basically Mario).
            </p>
            <div class="project-tech">
                <span>Godot</span>
                <span>Sprite Art(kind of)</span>
            </div>
            <button class="project-select-btn" onclick="openModal('platformer')">SELECT LEVEL</button>
        </div>

        <!-- NEW Project 6: FPS Game -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-crosshairs folder-icon" style="color: var(--accent-yellow);"></i>
                <div class="project-links">
                    <!--                    <a href="#"><i class="fa-brands fa-github"></i></a>-->
                    <!--                    <a href="#"><i class="fa-solid fa-up-right-from-square"></i></a>-->
                </div>
            </div>
            <h3 class="project-title">First Person Shooter</h3>
            <p class="project-desc">
                Coming Soon
            </p>
            <div class="project-tech">
                <span>Blender</span>
                <span>Python</span>
            </div>
            <button class="project-select-btn" onclick="openModal('fps')">SELECT LEVEL</button>
        </div>

        <!-- NEW Project 7: Ultrasound ML -->
        <div class="project-card">
            <div class="project-top">
                <i class="fa-solid fa-heart-pulse folder-icon" style="color: var(--accent-orange);"></i>
                <div class="project-links">
                    <!--                    <a href="#"><i class="fa-brands fa-github"></i></a>-->
                </div>
            </div>
            <h3 class="project-title">Ultrasound Chart Prediction Model</h3>
            <p class="project-desc">
                ML model that predicts live birth outcomes given 6 weeks of ultrasound information. Supporting preliminary analysis at BC Children's Hospital.
            </p>
            <div class="project-tech">
                <span>Python</span>
                <span>sklearn</span>
                <span>Pandas</span>
                <span>NumPy</span>
                <span>Data Analysis</span>
            </div>
            <button class="project-select-btn" onclick="openModal('ultrasound')">SELECT LEVEL</button>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="contact">
    <p class="arcade-font" style="color: var(--accent-cyan); font-size: 0.8rem; margin-bottom: 2rem;">GAME OVER?</p>
    <h2 style="font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--accent-yellow);">CONTINUE?</h2>
    <p>
        <span id="game-timer" style="font-size: 3rem; color: var(--header-color); font-family: 'Press Start 2P', cursive; text-shadow: 3px 3px 0 #b0003a;">10</span> <br>
        <br>
        Don't let the timer run out! Send me a message to continue! Currently looking for Summer/Fall 2026 internships.
    </p>
    <a href="mailto:christopherchenpatrick@gmail.com" class="cta-btn">INSERT COIN (EMAIL)</a>

    <div class="social-links">
        <a href="https://github.com/04christopher" target="_blank" rel="noopener noreferrer" class="social-icon"><i class="fa-brands fa-github"></i></a>
        <a href="https://www.linkedin.com/in/christopher-chen-027b161ba/" target="_blank" rel="noopener noreferrer" class="social-icon"><i class="fa-brands fa-linkedin"></i></a>
    </div>
</section>

<footer>
    <p>HIGH SCORE: 67 <br> Â© 2004 CHRISTOPHER CHEN</p>
</footer>

<!-- Project Modal Template -->
<div id="project-modal" class="modal-overlay">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal()">X</button>
        <h2 id="modal-title" class="arcade-font" style="color: var(--accent-yellow); font-size: 1.2rem; margin-bottom: 10px;">PROJECT TITLE</h2>

        <div class="modal-body">
            <!-- Carousel Container -->
            <div class="carousel-container">
                <button class="carousel-btn prev" onclick="moveCarousel(-1)">&#10094;</button>
                <div id="carousel-slides" style="width: 100%; height: 100%;">
                    <!-- Slides injected via JS -->
                </div>
                <button class="carousel-btn next" onclick="moveCarousel(1)">&#10095;</button>
            </div>

            <p id="modal-desc" class="mono" style="color: #ddd; margin-bottom: 20px;">
                Detailed description goes here...
            </p>

            <h3 style="font-size: 0.9rem; color: var(--accent-orange); margin-bottom: 10px;">TECH STACK:</h3>
            <div id="modal-tech" class="project-tech" style="margin-bottom: 25px;">
                <!-- Tech tags injected here -->
            </div>

            <div class="modal-links">
                <a id="modal-github" href="#" target="_blank" class="cta-btn" style="font-size: 0.7rem; padding: 12px; margin-top: 0;">VIEW SOURCE</a>
                <a id="modal-demo" href="#" target="_blank" class="cta-btn" style="font-size: 0.7rem; padding: 12px; margin-top: 0; border-color: var(--accent-cyan); color: var(--accent-cyan);">VIDEO DEMO</a>
                <a id="modal-demo2" href="#" target="_blank" class="cta-btn" style="font-size: 0.7rem; padding: 12px; margin-top: 0; border-color: var(--accent-cyan); color: var(--accent-cyan);">ANOTHER VIDEO DEMO</a>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
    // --- Arcade Game Logic (Asteroids) ---
    let gameActive = false;
    const arcadeCanvas = document.getElementById('arcade-canvas');
    const arcadeCtx = arcadeCanvas.getContext('2d');
    let ship, asteroids = [], bullets = [];
    let score = 0;
    let animationId;
    let keys = { ArrowUp: false, ArrowLeft: false, ArrowRight: false, Space: false };

    // Resize canvas
    function resizeArcade() {
        const container = document.getElementById('arcade-container');
        arcadeCanvas.width = container.clientWidth;
        arcadeCanvas.height = container.clientHeight;
    }
    window.addEventListener('resize', resizeArcade);

    class Ship {
        constructor() {
            this.x = arcadeCanvas.width / 2;
            this.y = arcadeCanvas.height / 2;
            this.r = 10;
            this.angle = 0;
            this.rotation = 0;
            this.thrust = false;
            this.vel = { x: 0, y: 0 };
        }
        update() {
            if (keys.ArrowLeft) this.angle -= 0.06;
            if (keys.ArrowRight) this.angle += 0.06;
            if (keys.ArrowUp) {
                this.thrust = true;
                this.vel.x += Math.cos(this.angle - Math.PI/2) * 0.16;
                this.vel.y += Math.sin(this.angle - Math.PI/2) * 0.16;
            } else {
                this.thrust = false;
                this.vel.x *= 0.98; // friction
                this.vel.y *= 0.98;
            }
            this.x += this.vel.x;
            this.y += this.vel.y;

            // Wrap around
            if (this.x < 0 - this.r) this.x = arcadeCanvas.width + this.r;
            if (this.x > arcadeCanvas.width + this.r) this.x = 0 - this.r;
            if (this.y < 0 - this.r) this.y = arcadeCanvas.height + this.r;
            if (this.y > arcadeCanvas.height + this.r) this.y = 0 - this.r;
        }
        draw() {
            arcadeCtx.strokeStyle = '#05d9e8';
            arcadeCtx.lineWidth = 2;
            arcadeCtx.beginPath();
            // Nose
            arcadeCtx.moveTo(
                this.x + 4/3 * this.r * Math.cos(this.angle - Math.PI/2),
                this.y + 4/3 * this.r * Math.sin(this.angle - Math.PI/2)
            );
            // Left rear
            arcadeCtx.lineTo(
                this.x - this.r * (2/3 * Math.cos(this.angle - Math.PI/2) + Math.sin(this.angle - Math.PI/2)),
                this.y - this.r * (2/3 * Math.sin(this.angle - Math.PI/2) - Math.cos(this.angle - Math.PI/2))
            );
            // Right rear
            arcadeCtx.lineTo(
                this.x - this.r * (2/3 * Math.cos(this.angle - Math.PI/2) - Math.sin(this.angle - Math.PI/2)),
                this.y - this.r * (2/3 * Math.sin(this.angle - Math.PI/2) + Math.cos(this.angle - Math.PI/2))
            );
            arcadeCtx.closePath();
            arcadeCtx.stroke();
        }
    }

    class Bullet {
        constructor(x, y, angle) {
            this.x = x;
            this.y = y;
            this.vel = {
                x: Math.cos(angle - Math.PI/2) * 5,
                y: Math.sin(angle - Math.PI/2) * 5
            };
            this.life = 60;
        }
        update() {
            this.x += this.vel.x;
            this.y += this.vel.y;
            this.life--;
        }
        draw() {
            arcadeCtx.fillStyle = '#ffc800';
            arcadeCtx.beginPath();
            arcadeCtx.arc(this.x, this.y, 2, 0, Math.PI*2);
            arcadeCtx.fill();
        }
    }

    class Asteroid {
        constructor(x, y, r) {
            this.x = x || Math.random() * arcadeCanvas.width;
            this.y = y || Math.random() * arcadeCanvas.height;
            this.r = r || Math.random() * 20 + 15;
            this.vel = {
                x: (Math.random() - 0.5) * 2,
                y: (Math.random() - 0.5) * 2
            };
            this.vertices = Math.floor(Math.random() * 5 + 5);
            this.offsets = [];
            for (let i=0; i<this.vertices; i++) {
                this.offsets.push(Math.random() * 0.4 + 0.8);
            }
        }
        update() {
            this.x += this.vel.x;
            this.y += this.vel.y;
            // Wrap
            if (this.x < -this.r) this.x = arcadeCanvas.width + this.r;
            if (this.x > arcadeCanvas.width + this.r) this.x = -this.r;
            if (this.y < -this.r) this.y = arcadeCanvas.height + this.r;
            if (this.y > arcadeCanvas.height + this.r) this.y = -this.r;
        }
        draw() {
            arcadeCtx.strokeStyle = '#ff2a6d';
            arcadeCtx.lineWidth = 2;
            arcadeCtx.beginPath();
            for (let i=0; i<this.vertices; i++) {
                const angle = i / this.vertices * Math.PI * 2;
                const r = this.r * this.offsets[i];
                const x = this.x + r * Math.cos(angle);
                const y = this.y + r * Math.sin(angle);
                if (i===0) arcadeCtx.moveTo(x, y);
                else arcadeCtx.lineTo(x, y);
            }
            arcadeCtx.closePath();
            arcadeCtx.stroke();
        }
    }

    function initGame() {
        resizeArcade();
        ship = new Ship();
        bullets = [];
        asteroids = [];
        score = 0;
        // Spawn asteroids away from ship
        for(let i=0; i<4; i++) {
            let a = new Asteroid();
            if (Math.hypot(a.x - ship.x, a.y - ship.y) < 100) {
                a.x += 200;
            }
            asteroids.push(a);
        }
    }

    function gameLoop() {
        if (!gameActive) return;

        arcadeCtx.fillStyle = 'rgba(0, 0, 0, 0.3)'; // Trail effect
        arcadeCtx.fillRect(0, 0, arcadeCanvas.width, arcadeCanvas.height);

        ship.update();
        ship.draw();

        // Update bullets
        for (let i = bullets.length - 1; i >= 0; i--) {
            bullets[i].update();
            bullets[i].draw();
            if (bullets[i].life <= 0) bullets.splice(i, 1);
        }

        // Update asteroids
        for (let i = asteroids.length - 1; i >= 0; i--) {
            asteroids[i].update();
            asteroids[i].draw();

            // --- NEW: Ship Collision Detection ---
            if (Math.hypot(ship.x - asteroids[i].x, ship.y - asteroids[i].y) < ship.r + asteroids[i].r) {
                gameOver();
                return;
            }

            // Collision Bullet vs Asteroid
            for (let j = bullets.length - 1; j >= 0; j--) {
                if (Math.hypot(asteroids[i].x - bullets[j].x, asteroids[i].y - bullets[j].y) < asteroids[i].r) {
                    // Split if big enough
                    if (asteroids[i].r > 15) {
                        asteroids.push(new Asteroid(asteroids[i].x, asteroids[i].y, asteroids[i].r/2));
                        asteroids.push(new Asteroid(asteroids[i].x, asteroids[i].y, asteroids[i].r/2));
                    }
                    asteroids.splice(i, 1);
                    bullets.splice(j, 1);
                    score += 100;
                    document.getElementById('arcade-score').innerText = 'SCORE: ' + score;
                    break;
                }
            }
        }

        // Spawn more if clear
        if (asteroids.length === 0) {
            for(let i=0; i<3; i++) asteroids.push(new Asteroid(0, Math.random()*arcadeCanvas.height));
        }

        animationId = requestAnimationFrame(gameLoop);
    }

    function startArcadeGame() {
        if (gameActive) return;
        gameActive = true;
        document.getElementById('arcade-overlay').style.display = 'none';
        document.getElementById('arcade-score').style.display = 'block';
        initGame();
        gameLoop();
    }

    // --- NEW: Game Over Function ---
    function gameOver() {
        gameActive = false;
        cancelAnimationFrame(animationId);
        const overlay = document.getElementById('arcade-overlay');
        overlay.style.display = 'flex';
        overlay.innerHTML = '<p class="arcade-font" style="font-size: 1.2rem; color: #ff2a6d; margin-bottom: 10px;">GAME OVER</p><p class="mono" style="font-size: 1.2rem;">FINAL SCORE: ' + score + '</p><p class="mono" style="font-size: 0.9rem; color: #aaa; margin-top: 10px;">CLICK TO RESTART (ARROWS: MOVE, SPACE: SHOOT)</p>';
    }

    // Input Handling
    window.addEventListener('keydown', (e) => {
        if (!gameActive) return;
        if (e.code === 'ArrowUp') { keys.ArrowUp = true; e.preventDefault(); }
        if (e.code === 'ArrowLeft') { keys.ArrowLeft = true; e.preventDefault(); }
        if (e.code === 'ArrowRight') { keys.ArrowRight = true; e.preventDefault(); }
        if (e.code === 'Space') {
            keys.Space = true;
            bullets.push(new Bullet(ship.x, ship.y, ship.angle));
            e.preventDefault();
        }
    });

    window.addEventListener('keyup', (e) => {
        if (e.code === 'ArrowUp') keys.ArrowUp = false;
        if (e.code === 'ArrowLeft') keys.ArrowLeft = false;
        if (e.code === 'ArrowRight') keys.ArrowRight = false;
        if (e.code === 'Space') keys.Space = false;
    });

    // Deactivate on click outside
    document.addEventListener('click', (e) => {
        const container = document.getElementById('arcade-container');
        if (gameActive && !container.contains(e.target)) {
            gameActive = false;
            cancelAnimationFrame(animationId);
            document.getElementById('arcade-overlay').style.display = 'flex';
            document.getElementById('arcade-overlay').innerHTML = '<p class="arcade-font" style="font-size: 1.2rem; color: var(--accent-yellow); margin-bottom: 10px;">PAUSED</p><p class="mono">CLICK TO RESUME</p>';
        }
    });


    // --- Project Modal Logic ---
    const projectData = {
        'algo': {
            title: 'Mindful Motion',
            desc: 'This project won 1st place at HelloHacks by using a camera to count your exercise reps and help you hold a yoga pose. We apply various image processing techniques to compare frames and detect movement.',
            tech: ['OpenCV', 'Python'],
            images: [
                "photos/hellohackscheque.jpg",
                "photos/hellohacksdeltaframes.jpg",
                "photos/hellohacksscreen.jpg"
            ],
            github: 'https://github.com/troy-wu/team1',
            demo: '#',
            demo2: '#'
        },
        'chatbot': {
            title: 'BasketBot',
            desc: 'I wrote this program for basketball score-keeping using a smartphone camera. It detects the ball based on size, shape, and colour, and tracks the ball through the net.' +
                ' We also implemented voice commands for timer and score controls, and trained a trial net detection neural network model. Check out the video demos below!',
            tech: ['OpenCV', 'Python', 'Vosk Speech Recognition', 'TensorFlow'],
            images: [
                "photos/basketbot.jpg",
                "photos/demoshot.jpg",
                "https://drive.google.com/file/d/1kXJ37UYKfjEzPfQK8SG2-606QpeM4Eju/view",
                "https://drive.google.com/file/d/1RJbd_o-VBn84WX9jimN7xBIibmxVnxko/view"
            ],
            github: 'https://github.com/04christopher/basketbot',
            demo: 'https://drive.google.com/file/d/1kXJ37UYKfjEzPfQK8SG2-606QpeM4Eju/view?resourcekey',
            demo2: 'https://drive.google.com/file/d/1RJbd_o-VBn84WX9jimN7xBIibmxVnxko/view'
        },
        'portfolio': {
            title: '\"Among Us\" Database',
            desc: 'This database serves as a record for a complete \"Among Us\" game (lists relationships, events, and history). I designed the schema myself, and it comes with a front end query tool. The next step is to actually integrate it with Among Us!',
            tech: ['SQL', 'Oracle DB', 'JS'],
            images: [
                "https://drive.google.com/file/d/1CdElc5I6TV4Dl2wkEI_pdeS23c8t8Sgt/preview",
                "photos/amongus ER diagram.png"
            ],
            github: 'https://github.com/04christopher/amongusDB',
            demo: 'https://drive.google.com/file/d/1CdElc5I6TV4Dl2wkEI_pdeS23c8t8Sgt/view',
            demo2: '#'
        },
        'campusexplorer': {
            title: 'UBC Campus Explorer',
            desc: 'You can click on any room on the UBC map (or search it up) to bring up a panel with the room information. It also calculates the estimated walking distance between rooms.',
            tech: ['TypeScript', 'Express.js', "REST API design"],
            images: [
                "photos/campus explorer.png",
                "https://drive.google.com/file/d/1UMgyWTUb7meSsjh7eU-Vkm6JJm3FVL8Z/view?usp=sharing"
            ],
            github: 'https://github.com/04christopher/campus-explorer',
            demo: 'https://drive.google.com/file/d/1UMgyWTUb7meSsjh7eU-Vkm6JJm3FVL8Z/view?usp=sharing',
            demo2: '#'
        },
        'platformer': {
            title: 'Avoid Cats!',
            desc: 'A platformer game where you try to get coins and avoid touching moving cats (modelled off my friends\' pets).' +
                ' This game was made in Godot, and I even drew all the pixel art for the characters myself. I had to draw multiple animation states AND time their states to appear correctly with movement, which was not easy to figure out.' +
                'This project consisted of a lot of data collection and manipulation, and I programmed some simple ' +
                'You can see the models in the gallery are blurry because they are 32 bit. I\'m also not good at drawing.',
            tech: ['Godot', 'Sprite Art (kind of)'],
            images: [
                "photos/avoidcats.png",
                "https://drive.google.com/file/d/1m9F8vCeV_fcAwv7SAvDRDa-ftW3OtbJ1/view?usp=sharing",
                "photos/juno coke.png",
                "photos/FINAL.png"
            ],
            github: '#',
            demo: 'https://drive.google.com/file/d/1m9F8vCeV_fcAwv7SAvDRDa-ftW3OtbJ1/view?usp=sharing',
            demo2: '#'
        },
        'fps': {
            title: 'First Person Shooter',
            desc: 'Coming Soon',
            tech: ['Blender', 'Python'],
            images: [
                "MULTIPLAYER LOBBY",
                "GAMEPLAY ACTION SHOT"
            ],
            github: '#',
            demo: '#',
            demo2: '#'
        },
        'ultrasound': {
            title: 'Ultrasound Chart Prediction Model',
            desc: 'A machine learning model designed to predict live birth outcomes based on patient ultrasound data. Unfortunately, '+
                'I can not show patient data or outcomes, but this project was done to support preliminary analysis and demonstrate feasibility of using ML models to predict outcomes, specifically in individuals with preeclampsia or recurrent pregnancy loss.' +
                'I displayed results from multiple models including random forest, logistic regression, and XGBoost, and reported high impact features and accuracy.' +
                ' Ask me about this!',
            tech: ['Python', 'sklearn', 'Pandas', 'NumPy', 'Data Analysis'],
            images: [
                "REDACTED!"
            ],
            github: '#',
            demo: '#',
            demo2: '#'
        }
    };

    let currentSlideIndex = 0;
    let currentProjectImages = [];

    function openModal(projectId) {
        const data = projectData[projectId];
        if(!data) return;

        document.getElementById('modal-title').innerText = data.title;
        document.getElementById('modal-desc').innerText = data.desc;

        // Clear and add tech tags
        const techContainer = document.getElementById('modal-tech');
        techContainer.innerHTML = '';
        data.tech.forEach(tech => {
            const span = document.createElement('span');
            span.innerText = tech;
            techContainer.appendChild(span);
        });

        // Update Links
        const githubBtn = document.getElementById('modal-github');
        const demoBtn = document.getElementById('modal-demo');
        const demoBtn2 = document.getElementById('modal-demo2');

        // Update hrefs
        githubBtn.href = data.github;
        demoBtn.href = data.demo;
        demoBtn2.href = data.demo2;

        // Optional: Hide buttons if link is just '#' or empty, remove this block if you always want them shown
        githubBtn.style.display = (data.github === '#' || !data.github) ? 'none' : 'inline-block';
        demoBtn.style.display = (data.demo === '#' || !data.demo) ? 'none' : 'inline-block';
        demoBtn2.style.display = (data.demo2 === '#' || !data.demo2) ? 'none' : 'inline-block';


        // --- Carousel Setup ---
        currentProjectImages = data.images || [];
        currentSlideIndex = 0;
        renderCarousel();

        const modal = document.getElementById('project-modal');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Prevent scrolling background
    }

    function renderCarousel() {
        const container = document.getElementById('carousel-slides');
        container.innerHTML = '';

        if (currentProjectImages.length === 0) {
            container.innerHTML = '<div class="carousel-slide active"><p>NO MEDIA LOADED</p></div>';
            return;
        }

        currentProjectImages.forEach((src, index) => {
            const slide = document.createElement('div');
            slide.className = index === 0 ? 'carousel-slide active' : 'carousel-slide';

            // --- SMART LINK DETECTION & CONVERSION ---
            let embedSrc = src;

            // 1. Convert Google Drive "View" links to "Preview"
            if (src.includes('drive.google.com') && src.includes('/view')) {
                embedSrc = src.replace(/\/view.*/, '/preview');
            }

            // 2. Convert standard YouTube "Watch" links to "Embed"
            if (src.includes('youtube.com/watch?v=')) {
                const videoId = src.split('v=')[1].split('&')[0];
                embedSrc = `https://www.youtube.com/embed/${videoId}`;
            } else if (src.includes('youtu.be/')) {
                const videoId = src.split('youtu.be/')[1].split('?')[0];
                embedSrc = `https://www.youtube.com/embed/${videoId}`;
            }

            // --- RENDER ---

            // Check for YouTube/Vimeo/Google Drive Embeds
            if (embedSrc.includes('youtube.com/embed') || embedSrc.includes('player.vimeo.com') || embedSrc.includes('drive.google.com')) {
                slide.innerHTML = `<iframe src="${embedSrc}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            }
            // Check for Video Files (mp4, webm, etc.)
            else if (src.match(/\.(mp4|webm|ogg)$/i)) {
                slide.innerHTML = `<video controls><source src="${src}" type="video/mp4">Your browser does not support the video tag.</video>`;
            }
            // Check for Images
            else if (src.includes('/') || src.includes('.')) {
                slide.innerHTML = `<img src="${src}" alt="Slide ${index}">`;
            }
            // Text Placeholder
            else {
                slide.innerHTML = `<i class="fa-solid fa-image" style="font-size: 3rem; margin-bottom: 15px;"></i><p>${src}</p>`;
            }
            container.appendChild(slide);
        });
    }

    function moveCarousel(n) {
        const slides = document.getElementsByClassName('carousel-slide');
        if (slides.length <= 1) return;

        // Pause any playing videos when sliding away
        const currentSlide = slides[currentSlideIndex];
        const iframe = currentSlide.querySelector('iframe');
        const video = currentSlide.querySelector('video');
        if (iframe) {
            // Reset src to stop youtube video
            const src = iframe.src;
            iframe.src = src;
        }
        if (video) {
            video.pause();
        }

        slides[currentSlideIndex].classList.remove('active');
        currentSlideIndex = (currentSlideIndex + n + slides.length) % slides.length;
        slides[currentSlideIndex].classList.add('active');
    }

    function closeModal() {
        const modal = document.getElementById('project-modal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restore scrolling
    }

    // Close modal if clicking outside the content box
    window.onclick = function(event) {
        const modal = document.getElementById('project-modal');
        if (event.target == modal) {
            closeModal();
        }
    }

    // --- Arcade Confetti Animation ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let particles = [];
    const particleCount = 50;
    const connectionDistance = 150;
    let mouse = { x: null, y: null };
    const colors = ['#ff2a6d', '#05d9e8', '#ffc800', '#ff6c11']; // Palette colors

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resize);
    resize();

    window.addEventListener('mousemove', (e) => {
        mouse.x = e.x;
        mouse.y = e.y;
    });

    class Particle {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.vx = (Math.random() - 0.5) * 0.8;
            this.vy = (Math.random() - 0.5) * 0.8;
            // Made particles slightly larger/bolder
            this.size = Math.random() * 6 + 4;
            this.color = colors[Math.floor(Math.random() * colors.length)];
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;

            // Bounce off edges
            if (this.x < 0 || this.x > width) this.vx *= -1;
            if (this.y < 0 || this.y > height) this.vy *= -1;
        }

        draw() {
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.size, this.size); // Square pixels
        }
    }

    function initParticles() {
        particles = [];
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
    }

    function animateParticles() {
        ctx.clearRect(0, 0, width, height);

        for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();

            // Connect particles if close
            for (let j = i; j < particles.length; j++) {
                const dx = particles[i].x - particles[j].x;
                const dy = particles[i].y - particles[j].y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < connectionDistance) {
                    // Increased opacity (0.4) and line width (2) for bolder lines
                    ctx.strokeStyle = `rgba(255, 255, 255, ${0.4 - distance/connectionDistance * 0.4})`;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(particles[i].x, particles[i].y);
                    ctx.lineTo(particles[j].x, particles[j].y);
                    ctx.stroke();
                }
            }

            // Mouse interaction
            if (mouse.x != null) {
                const dx = particles[i].x - mouse.x;
                const dy = particles[i].y - mouse.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < 200) {
                    ctx.strokeStyle = particles[i].color; // Color line with particle color
                    ctx.globalAlpha = 1 - distance/200;
                    ctx.lineWidth = 3; // Thicker mouse connection
                    ctx.beginPath();
                    ctx.moveTo(particles[i].x, particles[i].y);
                    ctx.lineTo(mouse.x, mouse.y);
                    ctx.stroke();
                    ctx.globalAlpha = 1;
                }
            }
        }
        requestAnimationFrame(animateParticles);
    }

    initParticles();
    animateParticles();


    // --- Typewriter Effect ---
    const textElement = document.getElementById('typewriter');
    const phrases = ["SOFTWARE DEVELOPER",
    "\"GREAT STUDENT\"", "TECH ENTHUSIAST","ALLEGEDLY VERY FUNNY"];

    let phraseIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typeSpeed = 150;
    let deleteSpeed = 100;
    let pauseEnd = 1500;

    function typeWriter() {
        const currentPhrase = phrases[phraseIndex];

        if (isDeleting) {
            textElement.textContent = currentPhrase.substring(0, charIndex - 1);
            charIndex--;
            typeSpeed = deleteSpeed;
        } else {
            textElement.textContent = currentPhrase.substring(0, charIndex + 1);
            charIndex++;
            typeSpeed = 150;
        }

        if (!isDeleting && charIndex === currentPhrase.length) {
            isDeleting = true;
            typeSpeed = pauseEnd;
        } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            phraseIndex = (phraseIndex + 1) % phrases.length;
            typeSpeed = 500;
        }

        setTimeout(typeWriter, typeSpeed);
    }

    document.addEventListener('DOMContentLoaded', () => {
        typeWriter();
        startCountdown();
    });

    // --- Countdown Timer Logic ---
    function startCountdown() {
        const timerEl = document.getElementById('game-timer');
        let timeLeft = 9;

        const timerInterval = setInterval(() => {
            timerEl.innerText = timeLeft;
            timeLeft--;

            if (timeLeft < 0) {
                clearInterval(timerInterval);
                timerEl.innerText = "INSERT COIN";
                timerEl.classList.add('flash-effect'); // Start flashing
                timerEl.style.fontSize = "2rem"; // Make text fit better

                // Restart after 2 seconds
                setTimeout(() => {
                    timerEl.classList.remove('flash-effect'); // Stop flashing
                    timerEl.style.fontSize = "3rem";
                    startCountdown();
                }, 4000);
            }
        }, 1000);
    }
</script>
</body>
</html>